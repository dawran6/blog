
<!DOCTYPE html>
<html lang="en">
<head>
  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet/less" type="text/css" href="http://localhost:8000/theme/stylesheet/style.less">
    <script src="//cdnjs.cloudflare.com/ajax/libs/less.js/2.5.1/less.min.js" type="text/javascript"></script>

  <link rel="stylesheet" type="text/css" href="http://localhost:8000/theme/pygments/github.min.css">
  <link rel="stylesheet" type="text/css" href="http://localhost:8000/theme/font-awesome/css/font-awesome.min.css">


    <link href="http://localhost:8000/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Daw-Ran Liou's Blog Atom">


    <link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon">

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />


<meta name="author" content="Daw-Ran Liou" />
<meta name="description" content="Twitter scrapper tutorial" />
<meta name="keywords" content="python">
<meta property="og:site_name" content="Daw-Ran Liou's Blog"/>
<meta property="og:title" content="Twitter scraper tutorial with Python: Requests, BeautifulSoup, and Selenium — Part 2"/>
<meta property="og:description" content="Twitter scrapper tutorial"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="http://localhost:8000/twitter-scraper-2.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2016-04-09 10:20:00-07:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="http://localhost:8000/author/daw-ran-liou.html">
<meta property="article:section" content="Python"/>
<meta property="article:tag" content="python"/>
<meta property="og:image" content="//en.gravatar.com/userimage/99964636/f9367cffe912e77fa93af6784d93b99e.jpg?size=120">

  <title>Daw-Ran Liou's Blog &ndash; Twitter scraper tutorial with Python: Requests, BeautifulSoup, and Selenium — Part 2</title>

</head>
<body>
  <aside>
    <div>
      <a href="http://localhost:8000">
        <img src="//en.gravatar.com/userimage/99964636/f9367cffe912e77fa93af6784d93b99e.jpg?size=120" alt="Daw-Ran Liou" title="Daw-Ran Liou">
      </a>
      <h1><a href="http://localhost:8000">Daw-Ran Liou</a></h1>

<p>Software Developer - Maker</p>

      <ul class="social">
        <li><a class="sc-linkedin" href="https://www.linkedin.com/in/randyliou" target="_blank"><i class="fa fa-linkedin"></i></a></li>
        <li><a class="sc-twitter" href="https://twitter.com/dawranliou" target="_blank"><i class="fa fa-twitter"></i></a></li>
        <li><a class="sc-github" href="https://github.com/dawran6" target="_blank"><i class="fa fa-github"></i></a></li>
        <li><a class="sc-medium" href="https://medium.com/@dawran6" target="_blank"><i class="fa fa-medium"></i></a></li>
        <li><a class="sc-rss" href="//dawranliou.com/feeds/all.atom.xml" target="_blank"><i class="fa fa-rss"></i></a></li>
      </ul>
    </div>


  </aside>
  <main>

    <nav>
      <a href="http://localhost:8000">    Home
</a>

      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>

      <a href="http://localhost:8000/feeds/all.atom.xml">    Atom
</a>

    </nav>

<article class="single">
  <header>
    <h1 id="twitter-scraper-2">Twitter scraper tutorial with Python: Requests, BeautifulSoup, and Selenium — Part 2</h1>
    <p>
          Posted on Sat 09 April 2016 in <a href="http://localhost:8000/category/python.html">Python</a>


        &#8226; 3 min read
    </p>
  </header>


  <div>
    <p>Inspired by Bruce, my friend’s take-home interview question, I started this 
bite-size project to play around with some of the most popular PyPI packages: 
Requests, BeautifulSoup, and Selenium. In this tutorial, I’ll show you the 
step-by-step process of how I build a Twitter Search web scraper without using 
their REST API.</p>
<hr>
<p>This is the part 2 of my Twitter scraper tutorial. If you haven’t checkout part 
1, the link is right here. In the last part, I left the tutorial with an unsolved
problem — how to scrape the web page that uses infinite scrolling design? Two 
solutions came into my mind: one more sophisticated, the other more naive:</p>
<h1>The more sophisticated approach</h1>
<p>In this approach, you need to understand how the infinite scrolling works. In 
the case of this tutorial, when the tweet search page loaded, none of the tweets
contents were loaded at the time. It is the frontend javascript code that sends 
the HTTP request to get tweets from the server asynchronously, and manipulates 
the HTML file to render those tweets. This technology is called AJAX. You may 
find more information online if you are interested.</p>
<p>Anyways, do you spot the flaw in the approach of part 1? The original HTTP 
request wasn’t the right request to get the tweets! It merely loads a page with 
right the javascript code, which load the tweets on the fly. So listen carefully:
If you are able to track down the right HTTP request object, which gets the 
tweets result, the only thing left is to replace the original request with this 
one. Voila! This is my so-called more sophisticated approach. However, I didn’t 
go with this approach simply I didn’t spend the time to :P</p>
<h1>The more naive approach</h1>
<p>Okay! This is the approach I want to show you. Think about the problem this way:
no matter how sophisticated the website is designed, the end result is still a 
list of tweets loaded on your browser. So my so-called more naive approach is to
focus on the end result only. if we could manipulate the browser to load those 
tweets for me, just as what we see normally, we could use the same the knowledge
to parse the HTML file and get the tweets. To automate the browser for us, I’ll 
show you how I used Selenium.</p>
<p>“Selenium automates browsers.” That’s what the official website says. Selenium 
Python bindings will help us to use Selenium using Python. Follow the 
installation page to install it. The code below tells Selenium to use Chrome to 
open up the Twitter search page and then move down the page for 5 times. Since 
the browser object provides the handy API to locate the tweets, we don’t need to
use the BeautifulSoup again to parse the HTML file. You may run the script now:</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>

<span class="kn">from</span> <span class="nn">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.common.keys</span> <span class="kn">import</span> <span class="n">Keys</span>

<span class="n">browser</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Chrome</span><span class="p">()</span>
<span class="n">base_url</span> <span class="o">=</span> <span class="s1">u&#39;https://twitter.com/search?q=&#39;</span>
<span class="n">query</span> <span class="o">=</span> <span class="s1">u&#39;</span><span class="si">%40d</span><span class="s1">awranliou&#39;</span>
<span class="n">url</span> <span class="o">=</span> <span class="n">base_url</span> <span class="o">+</span> <span class="n">query</span>

<span class="n">browser</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">body</span> <span class="o">=</span> <span class="n">browser</span><span class="o">.</span><span class="n">find_element_by_tag_name</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">body</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="n">Keys</span><span class="o">.</span><span class="n">PAGE_DOWN</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.2</span><span class="p">)</span>

<span class="n">tweets</span> <span class="o">=</span> <span class="n">browser</span><span class="o">.</span><span class="n">find_elements_by_class_name</span><span class="p">(</span><span class="s1">&#39;tweet-text&#39;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">tweet</span> <span class="ow">in</span> <span class="n">tweets</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">tweet</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>


<p>If you see the following error:</p>
<p><code>selenium.common.exceptions.WebDriverException: Message: 'chromedriver'
executable needs to be in PATH. Please see
https://sites.google.com/a/chromium.org/chromedriver/home</code></p>
<p>Don’t panic. Read the error message (don’t just google it blindly) and what’s 
wrong is that you are missing the ‘chromedriver’ executable file. It also 
suggest you to go to the website. How nice it is! Download the executable from 
the website given and put it under one of your PATH loacation. For me, I put it 
under my /usr/local/bin/ folder. You should be fine to run the script by now.</p>
<p>This is the end of this tutorial! Hope you enjoy working with these amazing PyPI
packages. Feel free to comment or contact me if you want to learn more. Happy 
learning! Cheers!</p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="http://localhost:8000/tag/python.html">python</a>
    </p>
  </div>




</article>

    <footer>
<p>
  &copy; Daw-Ran Liou 2016 - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>
</p>
<p>    Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p><p>
  <a rel="license"
     href="http://creativecommons.org/licenses/by-sa/4.0/"
     target="_blank">
    <img alt="Creative Commons License"
         title="Creative Commons License"
         style="border-width:0"
         src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png"
         width="80"
         height="15"/>
  </a>
</p>    </footer>
  </main>





<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Daw-Ran Liou's Blog ",
  "url" : "http://localhost:8000",
  "image": "//en.gravatar.com/userimage/99964636/f9367cffe912e77fa93af6784d93b99e.jpg?size=120",
  "description": "Daw-Ran Liou's Thoughts and Writings"
}
</script>
</body>
</html>